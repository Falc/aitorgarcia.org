{% extends "::base.html.twig" %}

{% block stylesheets %}
{% stylesheets filter="cssrewrite,?yui_css" output='css/min/frontend-*.css'
    'css/base.css'
    'css/forms.css'
    'bundles/aitorgarciablog/css/post_list.css'
%}
    <link href="{{ asset_url }}" rel="stylesheet" type="text/css" />
{% endstylesheets %}
{% endblock %}

{% block title %}{{ post.title }} - Aitor Garc√≠a{% endblock %}

{% block infotext %}{{ post.title }}{% endblock %}

{% block page %}
<div id="post-show" class="row">
    <div id="posts" class="block col-md-9">
        <div class="post">
            <div class="post-info">
                <span class="date">{{ post.createdAt | date('d/F/Y') }}</span>
            </div>
            {% if post.tags is not empty %}
            <div class="post-tags">
                <ul class="tags list-inline">
                {% for tag in post.tags %}
                    <li><span>{{ tag.name }}</span></li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            <div class="post-body">
                <p>{{ post.body | replace({'<br /><br />':'</p><p>'}) | raw }}</p>
            </div>
        </div>
        <div id="comments">
            <h3>{{ 'field.comments' | trans }}: {{ post.comments | length }}</h3>
            {% for comment in post.comments %}
            <div id="comment-{{ loop.index }}" class="comment">
                <div class="comment-author">
                {% if comment.website is empty %}
                    {{ comment.author }}
                {% else %}
                    <a href="{{ comment.website }}">{{ comment.author }}</a>
                {% endif %}
                </div>
                <div class="comment-date">
                    {{ comment.createdAt | date('d/F/Y | H:i') }}
                </div>
                <div class="comment-body">
                    {{ comment.body | raw }}
                </div>
            </div>
            {% endfor %}
        </div>
        <div id="comment-add">
            <h3>{{ 'field.leave_comment' | trans }}</h3>
            <form action="{{ path('blog_post_show',  { 'slug': post.slug }) }}" method="post" {{ form_enctype(form) }}>
                <fieldset>
                    <div class="form-group">
                        {{ form_label(form.author, 'field.author' | trans ) }}
                        {{ form_widget(form.author) }}
                        {{ form_errors(form.author) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.email, 'field.email' | trans ) }}
                        {{ form_widget(form.email) }}
                        {{ form_errors(form.email) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.website, 'field.website' | trans ) }}
                        {{ form_widget(form.website) }}
                        {{ form_errors(form.website) }}
                    </div>
                    <div class="form-group">
                        {{ form_label(form.body, 'field.body' | trans ) }}
                        {{ form_widget(form.body) }}
                        {{ form_errors(form.body) }}
                    </div>
                    {{ form_widget(form._token) }}
                </fieldset>
                <div id="form-actions">
                    <input class="btn btn-primary" type="submit" name="save" value="{{ 'button.send' | trans }}" />
                </div>
            </form>
        </div>
    </div>
    <div id="sidebar" class="block col-md-3">
        <div class="block">
            <h3>Block 1</h3>
        </div>
        <div class="block">
            <h3>Block 2</h3>
        </div>
        <div class="block">
            <h3>Block 3</h3>
        </div>
    </div>
</div>
{% endblock %}
