{% extends "::layout.html.twig" %}

{% block stylesheets %}
{% stylesheets filter="cssrewrite,?yui_css" output='css/frontend-*.css'
    'css/main.css'
    'css/tinyslider2.css'
    'bundles/portfolio/css/project.css'
%}
    <link href="{{ asset_url }}" rel="stylesheet" type="text/css" />
{% endstylesheets %}
{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/tinyslider2.min.js') }}" type="text/javascript"></script>
{% endblock %}

{% block subnavigation %}
<h2>{{ project.name }}</h2>
{{ parent() }}
{% endblock %}

{% block page %}
<div id="slider">
{% if project.screenshots is empty %}
    <img src="/files/no-project-screenshot.jpg" alt="{{ project.name }}" title="{{ project.name }}" />
{% else %}
    <div id="slider-content">
        <ul class="bg-dark-diamonds">
        {% for screenshot in project.screenshots %}
            <li>
                <img src="/{{ screenshot.getWebPath() }}" alt="{{ screenshot.name }}" title="{{ screenshot.name }}" />
            </li>
        {% endfor %}
        </ul>
    </div>
    <div class="slider-button" id="slider-left" onclick="slideshow.move(-1)"></div>
    <div class="slider-button" id="slider-right" onclick="slideshow.move(1)"></div>
    <ul id="slider-pager">
    {% for i in 1..project.screenshots.count() %}
        <li onclick="slideshow.pos({{ i-1 }})"></li>
    {% endfor %}
    </ul>
    <script type="text/javascript">
        var slideshow=new TINY.slider.slide('slideshow',{
            id:'slider-content',
            auto:5,
            resume:true,
            vertical:false,
            navid:'slider-pager',
            activeclass:'current',
            position:0,
            rewind:true,
            elastic:false,
            left:'slider-left',
            right:'slider-right'
        });
    </script>
{% endif %}
</div>

<div id="project-info">
    <h3>{{ 'projects.description' | trans }}</h3>
    {{ project.description | raw }}
    {% if project.client is not empty %}
    <h3>{{ 'projects.client' | trans }}</h3>
    <p>{{ project.client }}</p>
    {% endif %}
    <h3>{{ 'projects.technologies' | trans }}</h3>
    <p>
    {%- for technology in project.technologies -%}
        {{ technology.name }}{% if not loop.last %}, {% endif %}
    {%- endfor -%}
    </p>
    <div id="project-view">
        <a class="button" href="{{ project.link }}">{{ 'projects.view_project' | trans }}</a>
    </div>
</div>
<div class="clear"></div>
{% endblock %}
